{"version":3,"sources":["components/forms/FormsControls/FormsControls.tsx","components/forms/FormsControls/FormsControls.module.css","hoc/withAuthRedirect.tsx","utils/validators.ts","redux/profile-reducer.ts","assets/images/user.png","redux/friends-reducer.ts","api/chat-api.ts","redux/chat-reducer.ts","components/forms/AddMessageForm/AddMessageForm.styled.ts","utils/scroll-chat-helper.ts","assets/about/github.svg","assets/about/linkedin.svg","assets/about/vkontakte.svg","assets/about/telegram.svg","assets/about/gmail.svg","assets/images/preloader.svg","assets/images/sad.svg","assets/images/belarus.svg","assets/images/logo.svg","api/api.ts","components/AppFooter/AppFooter.styled.ts","components/AppFooter/AppFooter.tsx","selectors/app-selectors.ts","components/AppSidebar/AppSidebar.styled.ts","components/AppSidebar/AppSidebar.tsx","components/forms/SignUpForm/SignUpForm.styled.ts","components/forms/SignUpForm/SignUpForm.tsx","pages/SignUpPage/SignUpPage.tsx","hoc/withSuspense.tsx","pages/ErrorPage/ErrorPage.tsx","components/Users/User.styled.ts","components/Users/User.tsx","selectors/users-selectors.ts","components/forms/UsersSearchForm/UsersSearchForm.styled.ts","components/forms/UsersSearchForm/UsersSearchForm.tsx","utils/object-helpers.ts","redux/users-reducer.ts","pages/UsersPage/UsersPage.styles.ts","pages/UsersPage/UsersPage.tsx","components/AppContent/AppContent.styled.ts","selectors/dialogs-selectors.ts","components/Dialogs/Dialogs/Dialogs.styled.ts","components/Dialogs/Dialog/Dialog.styled.ts","components/Dialogs/Dialog/Dialog.tsx","components/Dialogs/Dialogs/Dialogs.tsx","components/Dialogs/DialogsChat/DialogsChat.styled.ts","components/Dialogs/DialogsChat/DialogMessage/DialogMessage.styled.ts","components/Dialogs/DialogsChat/DialogMessage/DialogMessage.tsx","components/forms/AddDialogMessageForm/AddDialogMessageForm.styled.ts","components/forms/AddDialogMessageForm/AddDialogMessageForm.tsx","components/Dialogs/DialogsChat/DialogsChat.tsx","pages/DialogsPage/DialogsPage.tsx","components/forms/LoginForm/LoginForm.styled.ts","components/forms/LoginForm/LoginForm.tsx","api/auth-api.ts","redux/auth-reducer.ts","pages/LoginPage/LoginPage.tsx","components/AppContent/AppContent.tsx","components/AppHeader/AppHeader.styled.ts","components/AppHeader/AppHeader.tsx","components/App/App.styled.ts","redux/app-reducer.ts","components/App/App.tsx","redux/news-reducer.ts","redux/store/redux-store.ts","Global.styled.ts","index.tsx","selectors/auth-selectors.ts","components/common/Preloader/Preloader.tsx","api/dialogs-api.ts","redux/dialogs-reducer.ts","api/users-api.ts","api/profile-api.ts"],"names":["FormControl","meta","touched","error","children","hasError","className","styles","formControl","Textarea","props","input","restProps","allowClear","InputField","createField","placeholder","name","validators","component","text","validate","module","exports","mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","WrappedComponent","connect","to","required","value","maxLengthCreator","maxLength","length","initialState","posts","id","v4","message","likesCount","date","Date","profile","status","editMode","actions","addPostActionCreator","newPostText","type","setUserProfile","setStatus","deletePost","postId","savePhotoSuccess","photos","getUserProfile","userId","dispatch","a","profileAPI","getProfile","data","getStatus","updateStatus","resultCode","ResultCodesEnum","Success","toast","info","savePhoto","file","saveProfile","getState","messages","Promise","reject","profileReducer","action","newPost","filter","p","friends","requestFriends","usersAPI","getUsers","items","friendsReducer","subscribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","console","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatAPI","eventName","callback","push","send","payload","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","sendMessage","chatReducer","map","m","index","array","AddMessageFormElement","styled","Col","AddMessageFormTextArea","TextArea","scrollChatHelper","isAutoScroll","setIsAutoScroll","element","currentTarget","Math","abs","scrollHeight","scrollTop","clientHeight","instance","axios","create","withCredentials","baseURL","headers","FooterWrapper","Footer","AboutBlock","div","AboutBlockHeader","h3","IconsBlock","IconsBlockElement","AboutBlockInfo","AppFooter","href","src","githubIcon","alt","linkedinIcon","vkIcon","telegramIcon","gmailIcon","selectInitialized","createSelector","app","initialized","MenuWrapper","Menu","SidebarWrapper","Sider","AppSidebar","width","mode","Item","key","HomeOutlined","HeartOutlined","ExceptionOutlined","UserOutlined","MessageOutlined","WechatOutlined","Divider","InfoCircleOutlined","SignUpFormWrapper","SignUpFormElement","Row","SignUpForm","Password","iconRender","visible","EyeTwoTone","EyeInvisibleOutlined","style","paddingBottom","paddingRight","paddingTop","format","Group","SignUpPage","h1","useSelector","selectIsAuth","UserAddOutlined","withSuspense","Suspense","fallback","Preloader","React","memo","ErrorSadPic","UserItem","CountryFlagIcon","img","UserNameLink","NavLink","UserListContent","UserCountry","UserItemRow","UserStatus","user","followingInProgress","unfollow","follow","small","userPhoto","size","xs","sm","md","lg","xl","xxl","BelarusFlag","followed","disabled","some","onClick","UserDeleteOutlined","usersPage","users","u","getPageSize","pageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","currentPage","getFollowingInProgress","getUsersFilter","SearchUserInput","Input","SearchTermSelect","Select","UsersSearchForm","onFilterChanged","enableReinitialize","initialValues","term","friend","String","onSubmit","values","setSubmitting","isSubmitting","htmlType","SearchOutlined","Option","updateObjectInArray","itemId","objPropName","newObjProps","isFetching","count","requestUsers","page","totalCount","_followUnfollowFlow","apiMethod","actionCreator","usersReducer","UsersPageWrapper","UserList","PaginatorWrapper","Pagination","useDispatch","history","useHistory","useEffect","parsed","queryString","location","search","substr","actualPage","actualFilter","Number","query","pathname","onPageChanged","pageNumber","userFollow","bind","userUnfollow","current","total","onChange","showSizeChanger","BackTopStyled","AppContentWrapper","Content","dialogsPage","selectDialogs","dialogs","selectDialogMessages","selectDialogUser","selectedUser","DialogsListCol","DialogsList","List","DialogDate","DialogItemInfo","DialogItem","DialogItemRight","Dialog","photo","userName","lastUserActivityDate","newMessagesCount","formattedDate","split","join","getDialogMessages","CloseCircleOutlined","Dialogs","d","hasNewMessage","DialogChatWindow","DialogMessagesBlock","DialogMessageElement","DialogMessageText","messageText","senderId","selectedUserName","selectAuthorizedUserId","find","dialog","selectUserName","profileImage","selectAuthorizedUserAvatar","AddDialogMessageFormTextArea","AddDialogMessageForm","useState","setMessage","autoSize","onPressEnter","event","preventDefault","sendDialogMessage","DialogsChat","messagesAnchorRef","useRef","scrollIntoView","behavior","onScroll","body","ref","getDialogs","LoginFormWrapper","LoginFormField","reduxForm","form","handleSubmit","undefined","formSummeryError","authAPI","get","then","res","email","password","rememberMe","captcha","post","delete","login","avatar","getAuthUserData","meData","myAvatar","authReducer","LoginFormHeader","LoginOutlined","formData","ProfilePage","lazy","NewsPage","FriendsPage","InfoPage","CommonChatPage","SuspendedProfilePage","SuspendedNewsPage","SuspendedFriendsPage","SuspendedInfoPage","SuspendedCommonChatPage","withRouter","exact","path","render","UpOutlined","HeaderWrapper","Header","HeaderLogo","HeaderLogoWrapper","HeaderUserAvatarLink","Link","HeaderUserEmail","span","HeaderLogoLink","AppHeader","authorizedUserEmail","selectAuthorizedUserEmail","authorizedUserAvatar","flex","Logo","MainFrameWrapper","Layout","GlobalPreloader","appReducer","getAuthUserDataPromise","all","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","news","title","imageUrl","summary","publishedAt","newsReducer","rootReducer","combineReducers","profilePage","friendsPage","newsPage","dialogsReducer","chat","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Global","createGlobalStyle","ReactDOM","basename","process","document","getElementById","PreloaderWrapper","preloader","dialogsAPI","put","startDialog","photoFile","log","FormData","append"],"mappings":"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","file":"static/js/main.cf9dea29.chunk.js","sourcesContent":["import React, {FC} from \"react\";\r\nimport styles from \"./FormsControls.module.css\";\r\nimport {Field, WrappedFieldMetaProps, WrappedFieldProps} from \"redux-form\";\r\nimport {FieldValidatorType} from \"../../../utils/validators\";\r\nimport TextArea from \"antd/es/input/TextArea\";\r\nimport {Input} from \"antd\";\r\n\r\ntype FormControlPropsType = {\r\n    meta: WrappedFieldMetaProps\r\n}\r\n\r\nconst FormControl: React.FC<FormControlPropsType> = ({meta: {touched, error}, children}) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")}>\r\n            <span>\r\n                {children}\r\n            </span>\r\n            {hasError && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea: FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}><TextArea {...input} {...restProps} allowClear/></FormControl>\r\n}\r\n\r\nexport const InputField: FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return <FormControl {...props}><Input {...input} {...restProps}/></FormControl>\r\n}\r\n\r\nexport function createField<FormKeysType extends string>(placeholder: string | undefined,\r\n                                                         name: FormKeysType,\r\n                                                         validators: Array<FieldValidatorType>,\r\n                                                         component: FC<WrappedFieldProps>,\r\n                                                         props = {},\r\n                                                         text = \"\") {\r\n    return (\r\n        <div>\r\n            <Field placeholder={placeholder}\r\n                   name={name}\r\n                   component={component}\r\n                   validate={validators}\r\n                   {...props}\r\n            /> {text}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport type GetStringKeys<T> = Extract<keyof T, string>","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__3MkGv\",\"error\":\"FormsControls_error__3kbED\",\"formSummeryError\":\"FormsControls_formSummeryError__1-U67\"};","import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/store/redux-store\";\r\n\r\nlet mapStateToPropsForRedirect = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\ntype MapPropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\ntype DispatchPropsType = {}\r\n\r\nexport function withAuthRedirect<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n\r\n    const RedirectComponent: React.FC<MapPropsType & DispatchPropsType> = props => {\r\n        let {isAuth, ...restProps} = props\r\n\r\n        if (!isAuth) return <Redirect to=\"/login\"/>\r\n\r\n        return <WrappedComponent {...restProps as WCP}/>\r\n    }\r\n\r\n    return connect<MapPropsType, DispatchPropsType, WCP, AppStateType>(\r\n        mapStateToPropsForRedirect, {})(RedirectComponent);\r\n}","export type FieldValidatorType = (value: string) => string | undefined\r\n\r\nexport const required: FieldValidatorType = (value) => {\r\n    if (value) return undefined;\r\n    return \"Заполните поле\";\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\r\n    if (value && value.length > maxLength) return `Максимальная длина: ${maxLength} символов`;\r\n    return undefined;\r\n}","import {FormAction} from \"redux-form\";\r\nimport {PhotosType, PostType, ProfileType} from \"../types/types\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./store/redux-store\";\r\nimport {profileAPI} from \"../api/profile-api\";\r\nimport {ResultCodesEnum} from \"../api/api\";\r\nimport {v4} from \"uuid\";\r\nimport {toast} from \"react-toastify\";\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: v4(), message: 'Это мой первый пост', likesCount: 5,\r\n            date: new Date(2021, 1, 21, 17, 55)},\r\n        {id: v4(), message: 'Всем привет', likesCount: 2,\r\n            date: new Date(2021, 3, 13, 13, 27)}\r\n    ] as Array<PostType>,\r\n    profile: null as ProfileType | null,\r\n    status: '',\r\n    editMode: false\r\n};\r\n\r\nconst profileReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/PROFILE/ADD_POST':\r\n            let newPost = {\r\n                id: v4(),\r\n                message: action.newPostText,\r\n                likesCount: 0,\r\n                date: new Date()\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n            };\r\n        case 'SN/PROFILE/SET_USER_PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case 'SN/PROFILE/SET_STATUS':\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        case 'SN/PROFILE/DELETE_POST':\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id !== action.postId)\r\n            };\r\n        case 'SN/PROFILE/SAVE_PHOTO_SUCCESS':\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos} as ProfileType\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addPostActionCreator: (newPostText: string) => ({type: 'SN/PROFILE/ADD_POST', newPostText} as const),\r\n    setUserProfile: (profile: ProfileType) => ({type: 'SN/PROFILE/SET_USER_PROFILE', profile} as const),\r\n    setStatus: (status: string) => ({type: 'SN/PROFILE/SET_STATUS', status} as const),\r\n    deletePost: (postId: string) => ({type: 'SN/PROFILE/DELETE_POST', postId} as const),\r\n    savePhotoSuccess: (photos: PhotosType) => ({type: 'SN/PROFILE/SAVE_PHOTO_SUCCESS', photos} as const)\r\n}\r\n\r\nexport const getUserProfile = (userId: number | null): ThunkType => async (dispatch) => {\r\n    let data = await profileAPI.getProfile(userId);\r\n    dispatch(actions.setUserProfile(data));\r\n}\r\n\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {\r\n    let data = await profileAPI.getStatus(userId)\r\n    dispatch(actions.setStatus(data));\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\r\n    try {\r\n        let data = await profileAPI.updateStatus(status);\r\n        if (data.resultCode === ResultCodesEnum.Success) {\r\n            dispatch(actions.setStatus(status));\r\n        }\r\n    } catch (error) {\r\n        toast.info(error)\r\n    }\r\n}\r\n\r\nexport const savePhoto = (file: File): ThunkType => async (dispatch) => {\r\n    try {\r\n        let data = await profileAPI.savePhoto(file);\r\n        if (data.resultCode === ResultCodesEnum.Success) {\r\n            dispatch(actions.savePhotoSuccess(data.data.photos));\r\n        }\r\n    } catch (error) {\r\n        toast.info(\"Отправленные данные некорректны\")\r\n    }\r\n}\r\n\r\nexport const saveProfile = (profile: ProfileType): ThunkType => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId\r\n    const data = await profileAPI.saveProfile(profile)\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        if (userId != null) {\r\n            dispatch(await getUserProfile(userId))\r\n        } else {\r\n            toast.info('userId can`t be null')\r\n        }\r\n    } else {\r\n        toast.info(data.messages[0])\r\n        return Promise.reject(data.messages[0])\r\n    }\r\n}\r\n\r\nexport default profileReducer;\r\n\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>","module.exports = __webpack_public_path__ + \"static/media/user.57b075ed.png\";","import {UserType} from \"../types/types\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./store/redux-store\";\r\nimport {usersAPI} from \"../api/users-api\";\r\n\r\nlet initialState = {\r\n    friends: [] as Array<UserType>\r\n}\r\n\r\nconst friendsReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/FRIENDS/SET_FRIENDS':\r\n            return {...state, friends: action.friends}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setFriends: (friends: Array<UserType>) => ({type: 'SN/FRIENDS/SET_FRIENDS', friends} as const)\r\n}\r\n\r\nexport const requestFriends = (): ThunkType =>\r\n    async (dispatch) => {\r\n        let data = await usersAPI.getUsers(1, 100, '', true);\r\n        dispatch(actions.setFriends(data.items));\r\n    }\r\n\r\nexport default friendsReducer;\r\n\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>","const subscribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\n\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subscribers['messages-received'].forEach(s => s(newMessages))\r\n};\r\n\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n};\r\n\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n};\r\n\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\n\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subscribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subscribers['messages-received'] = []\r\n        subscribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName].push(callback);\r\n        return () => {\r\n            // @ts-ignore\r\n            subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type StatusType = 'pending' | 'ready' | 'error';\r\nexport type ChatMessageAPIType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}","import {FormAction} from \"redux-form\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./store/redux-store\";\r\nimport {chatAPI, ChatMessageAPIType, StatusType} from \"../api/chat-api\";\r\nimport {Dispatch} from \"redux\";\r\nimport {v4} from \"uuid\";\r\n\r\ntype ChatMessageType = ChatMessageAPIType & {id: string}\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n};\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/chat/MESSAGES_RECEIVED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map( m => ({...m, id: v4() }))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            }\r\n        case 'SN/chat/STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            }\r\n        case 'SN/chat/CLEAN_OUT_MESSAGES':\r\n            return {\r\n                ...state,\r\n                messages: []\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) => ({\r\n        type: 'SN/chat/MESSAGES_RECEIVED', payload: {messages}\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: 'SN/chat/STATUS_CHANGED', payload: {status}\r\n    } as const),\r\n    cleanOutMessages: () => ({\r\n        type: 'SN/chat/CLEAN_OUT_MESSAGES'\r\n    } as const)\r\n}\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status))\r\n        }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start()\r\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n}\r\n\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    await dispatch(actions.cleanOutMessages());\r\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n    chatAPI.stop()\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkType => async () => {\r\n    chatAPI.sendMessage(message);\r\n}\r\n\r\nexport default chatReducer;\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>","import styled from \"styled-components\";\r\nimport {Col} from \"antd\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\n\r\nexport const AddMessageFormElement = styled(Col)`\r\n  padding: 20px 0 0 0;\r\n`\r\n\r\nexport const AddMessageFormTextArea = styled(TextArea)`\r\n  width: 500px;\r\n  height: 30px;\r\n`","import React from \"react\";\r\n\r\nexport const scrollChatHelper = (\r\n    e: React.UIEvent<HTMLDivElement, UIEvent>,\r\n    isAutoScroll: boolean,\r\n    setIsAutoScroll: (bool: boolean) => void) => {\r\n\r\n    const element = e.currentTarget;\r\n    if (Math.abs((element.scrollHeight - element.scrollTop) - element.clientHeight) < 300) {\r\n        !isAutoScroll && setIsAutoScroll(true)\r\n    } else {\r\n        isAutoScroll && setIsAutoScroll(false)\r\n    }\r\n}","module.exports = __webpack_public_path__ + \"static/media/github.19f49232.svg\";","module.exports = __webpack_public_path__ + \"static/media/linkedin.4989ae0f.svg\";","module.exports = __webpack_public_path__ + \"static/media/vkontakte.b5870904.svg\";","module.exports = __webpack_public_path__ + \"static/media/telegram.71da0f1e.svg\";","module.exports = __webpack_public_path__ + \"static/media/gmail.aabb690e.svg\";","module.exports = __webpack_public_path__ + \"static/media/preloader.3ba7224e.svg\";","module.exports = __webpack_public_path__ + \"static/media/sad.07a0b701.svg\";","module.exports = __webpack_public_path__ + \"static/media/belarus.54f7e3da.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.5d614f5e.svg\";","import axios from \"axios\";\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"6395d35c-2111-4d92-a3c3-f0a81868a921\"\r\n    }\r\n});\r\n\r\nexport type APIResponseType<D = {}, RC = ResultCodesEnum> = {\r\n    data: D\r\n    messages: Array<string>\r\n    resultCode: RC\r\n}\r\n\r\nexport type GetItemsType<D = {}> = {\r\n    items: Array<D>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1\r\n}","import styled from \"styled-components\";\r\nimport {Footer} from \"antd/es/layout/layout\";\r\n\r\nexport const FooterWrapper = styled(Footer)`\r\n  text-align: center;\r\n  background-color: #e8e8ed\r\n`\r\nexport const AboutBlock = styled.div`\r\n  margin: 0 auto;\r\n  width: 500px;\r\n`\r\nexport const AboutBlockHeader = styled.h3`\r\n  margin: 0;\r\n  padding: 0 0 15px 0;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  font-size: 18px;\r\n`\r\nexport const IconsBlock = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nexport const IconsBlockElement = styled.a`\r\n  outline: none;\r\n  padding-right: 10px;\r\n\r\n  &:last-child {\r\n    padding-right: 0;\r\n  }\r\n`\r\nexport const AboutBlockInfo = styled.div`\r\n  font-weight: lighter;\r\n  padding-top: 20px;\r\n`\r\n","import React, {FC} from \"react\";\r\nimport githubIcon from '../../assets/about/github.svg'\r\nimport linkedinIcon from '../../assets/about/linkedin.svg'\r\nimport vkIcon from '../../assets/about/vkontakte.svg'\r\nimport telegramIcon from '../../assets/about/telegram.svg'\r\nimport gmailIcon from '../../assets/about/gmail.svg'\r\nimport {\r\n    AboutBlock,\r\n    AboutBlockHeader,\r\n    AboutBlockInfo,\r\n    FooterWrapper,\r\n    IconsBlock,\r\n    IconsBlockElement} from \"./AppFooter.styled\";\r\n\r\nconst AppFooter: FC= () => {\r\n    return (\r\n        <FooterWrapper>\r\n            <AboutBlock>\r\n                <AboutBlockHeader>\r\n                    Me in social\r\n                </AboutBlockHeader>\r\n                <IconsBlock>\r\n                    <IconsBlockElement href='https://github.com/aaxsti'>\r\n                        <img src={githubIcon} alt='github link icon'/>\r\n                    </IconsBlockElement>\r\n                    <IconsBlockElement href='https://linkedin.com/in/astapenko-maxim'>\r\n                        <img src={linkedinIcon} alt='linkedin link icon'/>\r\n                    </IconsBlockElement>\r\n                    <IconsBlockElement href='https://vk.com/bladerunner1'>\r\n                        <img src={vkIcon} alt='vk link icon'/>\r\n                    </IconsBlockElement>\r\n                    <IconsBlockElement href='https://t.me/astapenkomaxim'>\r\n                        <img src={telegramIcon} alt='telegram link icon'/>\r\n                    </IconsBlockElement>\r\n                    <IconsBlockElement href='mailto:3646824@gmail.com'>\r\n                        <img src={gmailIcon} alt='gmail link icon'/>\r\n                    </IconsBlockElement>\r\n                </IconsBlock>\r\n                <AboutBlockInfo>\r\n                    Social Network ©2021 Created by Maxim Astapenko\r\n                </AboutBlockInfo>\r\n            </AboutBlock>\r\n        </FooterWrapper>\r\n    )\r\n}\r\n\r\nexport default AppFooter;","import {AppStateType} from \"../redux/store/redux-store\";\r\nimport {createSelector} from \"reselect\";\r\n\r\nconst app = (state: AppStateType) => state.app\r\n\r\nexport const selectInitialized = createSelector(\r\n    [app],\r\n    app => app.initialized\r\n)\r\n","import styled from \"styled-components\";\r\nimport {Menu} from \"antd\";\r\nimport Sider from \"antd/es/layout/Sider\";\r\n\r\nexport const MenuWrapper = styled(Menu)`\r\n  padding-top: 15px;\r\n  height: 100%;\r\n  border-radius: 2px;\r\n`\r\n\r\nexport const SidebarWrapper = styled(Sider)`\r\n  border-radius: 2px;\r\n`","import React from 'react';\r\nimport {Menu} from \"antd\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {\r\n    ExceptionOutlined,\r\n    HeartOutlined,\r\n    HomeOutlined,\r\n    InfoCircleOutlined,\r\n    MessageOutlined,\r\n    UserOutlined, WechatOutlined\r\n} from \"@ant-design/icons\";\r\nimport {MenuWrapper, SidebarWrapper} from './AppSidebar.styled';\r\n\r\nconst AppSidebar = () => {\r\n    return (\r\n        <SidebarWrapper width={190}>\r\n            <MenuWrapper mode=\"inline\">\r\n                <Menu.Item key=\"1\">\r\n                    <Link to=\"/profile\">\r\n                        <HomeOutlined/>\r\n                        Моя страница\r\n                    </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"2\">\r\n                    <Link to=\"/friends\">\r\n                        <HeartOutlined/>\r\n                        Мои друзья\r\n                    </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"3\">\r\n                    <Link to=\"/news\">\r\n                        <ExceptionOutlined/>\r\n                        Новоости\r\n                    </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"4\">\r\n                    <Link to=\"/users\">\r\n                        <UserOutlined/>\r\n                        Пользователи\r\n                    </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"5\">\r\n                    <Link to=\"/dialogs\">\r\n                        <MessageOutlined/>\r\n                        Мессенджер\r\n                    </Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"6\">\r\n                    <Link to=\"/commonChat\">\r\n                        <WechatOutlined />\r\n                        Общий чат\r\n                    </Link>\r\n                </Menu.Item>\r\n                <Menu.Divider/>\r\n                <Menu.Item key=\"7\">\r\n                    <Link to=\"/info\">\r\n                        <InfoCircleOutlined />\r\n                        Информация\r\n                    </Link>\r\n                </Menu.Item>\r\n            </MenuWrapper>\r\n        </SidebarWrapper>\r\n    );\r\n}\r\n\r\nexport default AppSidebar;","import styled from \"styled-components\";\r\nimport {Col, Row} from \"antd\";\r\n\r\nexport const SignUpFormWrapper = styled(Col)`\r\n  padding-right: 30px;\r\n`\r\n\r\nexport const SignUpFormElement = styled(Row)`\r\n  padding-bottom: 15px;\r\n`\r\n","import React, {FC} from \"react\";\r\nimport {Button, Col, DatePicker, Input, Radio, Row} from \"antd\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {EyeInvisibleOutlined, EyeTwoTone} from \"@ant-design/icons\";\r\nimport {SignUpFormElement, SignUpFormWrapper } from \"./SignUpForm.styled\";\r\n\r\nconst dateFormat = 'YYYY/MM/DD';\r\n\r\nexport const SignUpForm: FC = () => {\r\n    return (\r\n        <form>\r\n            <Row>\r\n                <SignUpFormWrapper>\r\n                    <SignUpFormElement>\r\n                        <Input placeholder={'Email'}/>\r\n                    </SignUpFormElement>\r\n                    <SignUpFormElement>\r\n                        <Input.Password\r\n                            placeholder=\"Пароль\"\r\n                            iconRender={visible => (visible ? <EyeTwoTone/> : <EyeInvisibleOutlined/>)}\r\n                        />\r\n                    </SignUpFormElement>\r\n                    <SignUpFormElement>\r\n                        <Input.Password\r\n                            placeholder=\"Повторите пароль\"\r\n                            iconRender={visible => (visible ? <EyeTwoTone/> : <EyeInvisibleOutlined/>)}\r\n                        />\r\n                    </SignUpFormElement>\r\n                    <SignUpFormElement>\r\n                        <Input placeholder={'Имя'}/>\r\n                    </SignUpFormElement>\r\n                    <SignUpFormElement>\r\n                        <Input placeholder={'Фамилия'}/>\r\n                    </SignUpFormElement>\r\n                </SignUpFormWrapper>\r\n                <Col>\r\n                    <SignUpFormElement style={{width: 220}}>\r\n                        <Input placeholder={'Номер телефона'}/>\r\n                    </SignUpFormElement>\r\n                    <Row style={{paddingBottom: 23}}>\r\n                        <Row style={{paddingRight: 10, paddingTop: 6}}>Дата рождения :</Row>\r\n                        <DatePicker placeholder={'Выберите дату'} format={dateFormat}/>\r\n                    </Row>\r\n                    <SignUpFormElement>\r\n                        <Row style={{paddingRight: 30}}>Пол :</Row>\r\n                        <Radio.Group>\r\n                            <Radio value={1} style={{paddingRight: 20}}>Мужской</Radio>\r\n                            <Radio value={2}>Женский</Radio>\r\n                        </Radio.Group>\r\n                    </SignUpFormElement>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Button>Создать аккаунт</Button>\r\n                <NavLink to={'/login'}><Button type=\"link\">Уже есть аккаунт</Button></NavLink>\r\n            </Row>\r\n        </form>\r\n    )\r\n}\r\n","import React, {FC} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {UserAddOutlined} from \"@ant-design/icons\";\r\nimport {SignUpForm} from \"../../components/forms/SignUpForm/SignUpForm\";\r\nimport styled from \"styled-components\";\r\nimport {selectIsAuth} from \"../../selectors/auth-selectors\";\r\n\r\nexport const SignUpHeader = styled.h1`\r\n  padding-bottom: 8px;\r\n`\r\n\r\nexport const SignUpPage: FC = () => {\r\n\r\n    const isAuth = useSelector(selectIsAuth)\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={\"profile\"}/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Создать аккаунт &nbsp; &nbsp;<UserAddOutlined /></h1>\r\n            <SignUpForm/>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport Preloader from \"../components/common/Preloader/Preloader\";\r\n\r\nfunction withSuspense<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n    return (props: WCP) => {\r\n        return <React.Suspense fallback={<Preloader/>}>\r\n            <WrappedComponent {...props}/>\r\n        </React.Suspense>\r\n    }\r\n}\r\n\r\nexport default withSuspense;","import React from 'react';\r\nimport ErrorSadPic from '../../assets/images/sad.svg'\r\n\r\nconst ErrorPage = () => {\r\n    return (\r\n        <div>\r\n            <h2>\r\n                404 NOT FOUND\r\n            </h2>\r\n            <img style={{width: '40px'}}\r\n                 src={ErrorSadPic}\r\n                 alt='404 Error'\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(ErrorPage);","import styled from \"styled-components\";\r\nimport Item from \"antd/es/list/Item\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {Col, Row} from \"antd\";\r\n\r\nexport const UserItem = styled(Item)`\r\n  background-color: #f0f2f5;\r\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.12);\r\n  margin-top: 15px;\r\n  border-radius: 2px;\r\n  transition: 0.3s;\r\n\r\n  &:hover {\r\n    opacity: 1;\r\n    background-color: #d4d7de;\r\n  }\r\n`\r\n\r\nexport const CountryFlagIcon = styled.img`\r\n  width: 15px;\r\n`\r\n\r\nexport const UserNameLink = styled(NavLink)`\r\n  color: black;\r\n  &:hover {\r\n    color: gray;\r\n  }\r\n`\r\n\r\nexport const UserListContent = styled(Col)`\r\n  padding-left: 30px;\r\n`\r\n\r\nexport const UserCountry = styled.div`\r\n  padding-top: 5px;\r\n`\r\n\r\nexport const UserItemRow = styled(Row)`\r\n  padding: 0 10px 0 10px;\r\n`\r\n\r\nexport const UserStatus = styled.p`\r\n  margin: 0;\r\n  padding: 0;\r\n  color: gray;\r\n  font-size: 13px;\r\n  word-wrap: break-word;\r\n  width: 600px;\r\n`","import React, {FC} from \"react\";\r\nimport userPhoto from \"../../assets/images/user.png\";\r\nimport {UserType} from \"../../types/types\";\r\nimport {Avatar, Button, Col} from \"antd\";\r\nimport {UserAddOutlined, UserDeleteOutlined} from \"@ant-design/icons\";\r\nimport {\r\n    CountryFlagIcon,\r\n    UserCountry,\r\n    UserItem,\r\n    UserItemRow,\r\n    UserListContent,\r\n    UserNameLink,\r\n    UserStatus\r\n} from \"./User.styled\";\r\nimport BelarusFlag from \"../../assets/images/belarus.svg\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype PropsType = {\r\n    user: UserType\r\n    followingInProgress: Array<number>\r\n    unfollow: (userId: number) => void\r\n    follow: (userId: number) => void\r\n}\r\n\r\nconst User: FC<PropsType> = ({user, followingInProgress, unfollow, follow}) => {\r\n    return (\r\n        <UserItem>\r\n            <UserItemRow>\r\n                <Col>\r\n                    <NavLink to={'/profile/' + user.id}>\r\n                        <Avatar\r\n                            src={user.photos.small != null ? user.photos.small : userPhoto}\r\n                            size={{xs: 24, sm: 32, md: 40, lg: 64, xl: 80, xxl: 80}}\r\n                        />\r\n                    </NavLink>\r\n                </Col>\r\n                <UserListContent>\r\n                    <UserNameLink to={'/profile/' + user.id}>\r\n                        <span>{user.name}</span>\r\n                    </UserNameLink>\r\n                    <UserStatus>\r\n                        {user.status ? user.status : ' '}\r\n                    </UserStatus>\r\n                    <UserCountry>\r\n                        <CountryFlagIcon\r\n                            src={BelarusFlag}\r\n                            alt={'Country flag'}/> Беларусь\r\n                    </UserCountry>\r\n                </UserListContent>\r\n                <Col>\r\n                    {user.followed\r\n                        ? <Button disabled={followingInProgress\r\n                            .some(id => id === user.id)}\r\n                                  onClick={() => {\r\n                                      unfollow(user.id);\r\n                                  }}>\r\n                            <UserDeleteOutlined/></Button>\r\n\r\n                        : <Button disabled={followingInProgress\r\n                            .some(id => id === user.id)}\r\n                                  onClick={() => {\r\n                                      follow(user.id)\r\n                                  }}>\r\n                            <UserAddOutlined/></Button>\r\n                    }\r\n                </Col>\r\n            </UserItemRow>\r\n        </UserItem>\r\n    )\r\n}\r\n\r\nexport default React.memo(User);","import {createSelector} from \"reselect\";\r\nimport {AppStateType} from \"../redux/store/redux-store\";\r\n\r\nconst getUsersSelector = (state: AppStateType) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true);\r\n})\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress;\r\n}\r\n\r\nexport const getUsersFilter = (state: AppStateType) => {\r\n    return state.usersPage.filter;\r\n}","import styled from \"styled-components\";\r\nimport {Input, Select} from \"formik-antd\";\r\n\r\nexport const SearchUserInput = styled(Input)`\r\n  width: 200px;\r\n`\r\n\r\nexport const SearchTermSelect = styled(Select)`\r\n  width: 160px;\r\n`\r\n","import {Form, Formik} from \"formik\";\r\nimport React, {FC} from \"react\";\r\nimport {FilterType} from \"../../../redux/users-reducer\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {getUsersFilter} from \"../../../selectors/users-selectors\";\r\nimport Button from \"antd/lib/button\";\r\nimport {Select} from \"formik-antd\";\r\nimport {SearchOutlined} from \"@ant-design/icons\";\r\nimport {SearchTermSelect, SearchUserInput} from \"./UsersSearchForm.styled\";\r\n\r\ntype FriendFormType = \"true\" | \"false\" | \"null\";\r\n\r\ntype FormType = {\r\n    term: string\r\n    friend: FriendFormType\r\n}\r\n\r\ntype PropsType = {\r\n    onFilterChanged: (filter: FilterType) => void\r\n}\r\n\r\nexport const UsersSearchForm: FC<PropsType> = React.memo(({onFilterChanged}) => {\r\n        const filter = useSelector(getUsersFilter)\r\n\r\n        const submit = (values: FormType, {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\r\n            const filter: FilterType = {\r\n                term: values.term,\r\n                friend: values.friend === \"null\" ? null : values.friend === \"true\"\r\n            }\r\n            onFilterChanged(filter)\r\n            setSubmitting(false)\r\n        }\r\n\r\n        return (\r\n            <Formik\r\n                enableReinitialize\r\n                initialValues={{\r\n                    term: filter.term,\r\n                    friend: String(filter.friend) as FriendFormType\r\n                }}\r\n                onSubmit={submit}\r\n            >\r\n                {({isSubmitting}) => (\r\n                    <Form>\r\n                        <SearchUserInput name=\"term\"/>\r\n\r\n                        <Button htmlType=\"submit\" disabled={isSubmitting}>\r\n                            <SearchOutlined/>\r\n                        </Button>\r\n\r\n                        <SearchTermSelect name=\"friend\">\r\n                            <Select.Option value=\"null\">Все</Select.Option>\r\n                            <Select.Option value=\"true\">Только друзья</Select.Option>\r\n                            <Select.Option value=\"false\">Все кроме друзей</Select.Option>\r\n                        </SearchTermSelect>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        )\r\n    }\r\n)","export const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n    return items.map((u: any) => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        }\r\n        return u;\r\n    })\r\n}","import {APIResponseType, ResultCodesEnum} from \"../api/api\";\r\nimport {updateObjectInArray} from \"../utils/object-helpers\";\r\nimport {UserType} from \"../types/types\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./store/redux-store\";\r\nimport {Dispatch} from \"redux\";\r\nimport {usersAPI} from \"../api/users-api\";\r\n\r\nlet initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 10 as number,\r\n    totalUsersCount: 0 as number,\r\n    currentPage: 1 as number,\r\n    isFetching: true as boolean,\r\n    followingInProgress: [] as Array<number>,    // array of user id`s\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean\r\n    }\r\n}\r\n\r\nconst usersReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/USERS/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true})\r\n            }\r\n        case 'SN/USERS/UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: false})\r\n            }\r\n        case 'SN/USERS/SET_USERS':\r\n            return {...state, users: action.users}\r\n        case 'SN/USERS/SET_CURRENT_PAGE':\r\n            return {...state, currentPage: action.currentPage}\r\n        case 'SN/USERS/SET_TOTAL_USERS_COUNT':\r\n            return {...state, totalUsersCount: action.count}\r\n        case 'SN/USERS/TOGGLE_IS_FETCHING': {\r\n            return {...state, isFetching: action.isFetching}\r\n        }\r\n        case 'SN/USERS/SET_FILTER':\r\n            return {...state, filter: action.payload}\r\n        case 'SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    followSuccess: (userId: number) => ({type: 'SN/USERS/FOLLOW', userId} as const),\r\n    unfollowSuccess: (userId: number) => ({type: 'SN/USERS/UNFOLLOW', userId} as const),\r\n    setUsers: (users: Array<UserType>) => ({type: 'SN/USERS/SET_USERS', users} as const),\r\n    setCurrentPage: (currentPage: number) => ({\r\n        type: 'SN/USERS/SET_CURRENT_PAGE',\r\n        currentPage\r\n    } as const),\r\n    setFilter: (filter: FilterType) => ({\r\n        type: 'SN/USERS/SET_FILTER',\r\n        payload: filter\r\n    } as const),\r\n    setTotalUsersCount: (totalUsersCount: number) => ({\r\n        type: 'SN/USERS/SET_TOTAL_USERS_COUNT',\r\n        count: totalUsersCount\r\n    } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({\r\n        type: 'SN/USERS/TOGGLE_IS_FETCHING',\r\n        isFetching\r\n    } as const),\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => ({\r\n        type: 'SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS',\r\n        isFetching,\r\n        userId\r\n    } as const)\r\n}\r\n\r\nexport const requestUsers = (page: number,\r\n                             pageSize: number,\r\n                             filter: FilterType): ThunkType =>\r\n    async (dispatch) => {\r\n        dispatch(actions.toggleIsFetching(true));\r\n        dispatch(actions.setCurrentPage(page));\r\n        dispatch(actions.setFilter(filter));\r\n\r\n        let data = await usersAPI.getUsers(page, pageSize, filter.term, filter.friend);\r\n        dispatch(actions.toggleIsFetching(false));\r\n        dispatch(actions.setUsers(data.items));\r\n        dispatch(actions.setTotalUsersCount(data.totalCount));\r\n\r\n    }\r\n\r\nconst _followUnfollowFlow = async (dispatch: DispatchType,\r\n                                   userId: number,\r\n                                   apiMethod: (userId: number) => Promise<APIResponseType>,\r\n                                   actionCreator: (userId: number) => ActionsType) => {\r\n\r\n    dispatch(actions.toggleFollowingProgress(true, userId));\r\n\r\n    let data = await apiMethod(userId);\r\n\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(actions.toggleFollowingProgress(false, userId));\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType =>\r\n    async (dispatch) => {\r\n        await _followUnfollowFlow(dispatch, userId, usersAPI.userFollow.bind(usersAPI), actions.followSuccess);\r\n    }\r\n\r\nexport const unfollow = (userId: number): ThunkType =>\r\n    async (dispatch) => {\r\n        await _followUnfollowFlow(dispatch, userId, usersAPI.userUnfollow.bind(usersAPI), actions.unfollowSuccess);\r\n    }\r\n\r\nexport default usersReducer;\r\n\r\nexport type InitialStateType = typeof initialState\r\nexport type FilterType = typeof initialState.filter\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype DispatchType = Dispatch<ActionsType>\r\ntype ThunkType = BaseThunkType<ActionsType>","import styled from \"styled-components\";\r\nimport {Pagination} from \"antd\";\r\n\r\nexport const UsersPageWrapper = styled.div`\r\n  width: 100%;\r\n`\r\n\r\nexport const UserList = styled.div`\r\n  border-radius: 2px;\r\n  margin-bottom: 10px;\r\n`\r\n\r\nexport const PaginatorWrapper = styled(Pagination)`\r\n  padding-top: 10px;\r\n`","import React, {FC, useEffect} from \"react\";\r\nimport User from \"../../components/Users/User\";\r\nimport {UsersSearchForm} from \"../../components/forms/UsersSearchForm/UsersSearchForm\";\r\nimport {FilterType, follow, requestUsers, unfollow} from \"../../redux/users-reducer\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers,\r\n    getUsersFilter\r\n} from \"../../selectors/users-selectors\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport * as queryString from \"querystring\";\r\nimport Preloader from \"../../components/common/Preloader/Preloader\";\r\nimport {UserOutlined} from \"@ant-design/icons\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {PaginatorWrapper, UserList, UsersPageWrapper } from \"./UsersPage.styles\";\r\n\r\ntype PropsType = {}\r\n\r\ntype QueryParamsType = { term?: string; page?: string; friend?: string };\r\n\r\nconst UsersPage: FC<PropsType> = () => {\r\n    const users = useSelector(getUsers)\r\n    const totalUsersCount = useSelector(getTotalUsersCount)\r\n    const currentPage = useSelector(getCurrentPage)\r\n    const pageSize = useSelector(getPageSize)\r\n    const filter = useSelector(getUsersFilter)\r\n    const followingInProgress = useSelector(getFollowingInProgress)\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const parsed = queryString.parse(history.location.search.substr(1)) as QueryParamsType\r\n\r\n        let actualPage = currentPage\r\n        let actualFilter = filter\r\n\r\n        if (!!parsed.page) actualPage = Number(parsed.page)\r\n\r\n        if (!!parsed.term) actualFilter = {...actualFilter, term: parsed.term as string}\r\n        switch (parsed.friend) {\r\n            case 'null':\r\n                actualFilter = {...actualFilter, friend: null}\r\n                break;\r\n            case 'true':\r\n                actualFilter = {...actualFilter, friend: true}\r\n                break;\r\n            case 'false':\r\n                actualFilter = {...actualFilter, friend: false}\r\n                break;\r\n        }\r\n\r\n        dispatch(requestUsers(actualPage, pageSize, actualFilter));\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const query: QueryParamsType = {}\r\n        if (!!filter.term) query.term = filter.term\r\n        if (filter.friend !== null) query.friend = String(filter.friend)\r\n        if (currentPage !== 1) query.page = String(currentPage)\r\n\r\n        history.push({\r\n            pathname: '/users',\r\n            search: queryString.stringify(query)\r\n        })\r\n    }, [filter, currentPage])\r\n\r\n    if (!totalUsersCount) {\r\n        return <Preloader/>\r\n    }\r\n\r\n    const onPageChanged = (pageNumber: number) => {\r\n        dispatch(requestUsers(pageNumber, pageSize, filter));\r\n    }\r\n\r\n    const onFilterChanged = (filter: FilterType) => {\r\n        dispatch(requestUsers(1, pageSize, filter));\r\n    }\r\n\r\n    const userFollow = (userId: number) => {\r\n        dispatch(follow(userId))\r\n    }\r\n\r\n    const userUnfollow = (userId: number) => {\r\n        dispatch(unfollow(userId))\r\n    }\r\n\r\n    return (\r\n        <UsersPageWrapper>\r\n            <h2><UserOutlined/> Пользователи ({totalUsersCount})</h2>\r\n\r\n            <UsersSearchForm onFilterChanged={onFilterChanged}/>\r\n\r\n            <PaginatorWrapper\r\n                pageSize={pageSize}\r\n                current={currentPage}\r\n                total={totalUsersCount}\r\n                onChange={onPageChanged}\r\n                showSizeChanger={false}\r\n            />\r\n\r\n            <UserList>\r\n                    {users.map(u => <User\r\n                        user={u}\r\n                        key={u.id}\r\n                        followingInProgress={followingInProgress}\r\n                        unfollow={userUnfollow}\r\n                        follow={userFollow}\r\n                    />)}\r\n            </UserList>\r\n\r\n            <PaginatorWrapper\r\n                pageSize={pageSize}\r\n                current={currentPage}\r\n                total={totalUsersCount}\r\n                onChange={onPageChanged}\r\n                showSizeChanger={false}\r\n            />\r\n\r\n        </UsersPageWrapper>\r\n    )\r\n}\r\n\r\nexport default withAuthRedirect(UsersPage);","import styled from \"styled-components\";\r\nimport {Content} from \"antd/es/layout/layout\";\r\n\r\nexport const BackTopStyled = styled.div`\r\n  height: 40px;\r\n  width: 40px;\r\n  line-height: 40px;\r\n  border-radius: 2px;\r\n  background-color: #1088e9;\r\n  color: #fff;\r\n  text-align: center;\r\n  font-size: 14px\r\n`\r\nexport const AppContentWrapper = styled(Content)`\r\n  border-radius: 2px;\r\n  margin: 0 0 0 50px;\r\n  padding: 30px;\r\n  min-height: 700px;\r\n  display: flex;\r\n  background-color: white\r\n`","import {AppStateType} from \"../redux/store/redux-store\";\r\nimport { createSelector } from 'reselect'\r\nimport {selectAuthorizedUserId} from \"./auth-selectors\";\r\n\r\nconst dialogsPage = (state: AppStateType) => state.dialogsPage\r\n\r\nexport const selectDialogs = createSelector(\r\n    [dialogsPage],\r\n    dialogsPage => dialogsPage.dialogs\r\n)\r\n\r\nexport const selectDialogMessages = createSelector(\r\n    [dialogsPage],\r\n    dialogsPage => dialogsPage.messages\r\n)\r\n\r\nexport const selectDialogUser = createSelector(\r\n    [dialogsPage],\r\n    dialogsPage => dialogsPage.selectedUser\r\n)\r\n\r\nexport const selectUserName = (senderId: number) => createSelector(\r\n    [selectDialogs, selectAuthorizedUserId],\r\n    (selectDialogs, userId) => {\r\n        if (senderId === userId) return \"Вы\"\r\n        else return selectDialogs.find((dialog) => dialog.id === senderId)?.userName\r\n    }\r\n)","import styled from \"styled-components\";\r\nimport {Col, List} from \"antd\";\r\n\r\nexport const DialogsListCol = styled(Col)`\r\n  padding-right: 20px;\r\n  border-right: 1px #ebedee solid;\r\n`\r\n\r\nexport const DialogsList = styled(List)`\r\n  width: 300px;\r\n`","import styled from \"styled-components\";\r\nimport {Col, Row} from \"antd\";\r\n\r\nexport const DialogDate = styled.p`\r\n  margin: 0;\r\n  padding: 0;\r\n  color: gray;\r\n  font-size: 13px;\r\n`\r\n\r\nexport const DialogItemInfo = styled(Col)`\r\n  padding-left: 20px;\r\n`\r\n\r\nexport const DialogItem = styled(Row)`\r\n  width: 300px;\r\n  padding: 10px;\r\n  transition: 0.3s;\r\n  &:hover {\r\n    opacity: 1;\r\n    background-color: #ebedee;\r\n  }\r\n  &:focus {\r\n    background-color: #ebedee;\r\n  }\r\n  cursor: pointer;\r\n  border-bottom: 1px #eef0f0 solid;\r\n`\r\n\r\nexport const DialogItemRight = styled(Col)`\r\n  font-size: 16px;\r\n  margin-left: auto;\r\n  color: gray;\r\n`","import React, {FC} from \"react\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {getDialogMessages} from \"../../../redux/dialogs-reducer\";\r\nimport {DialogDate, DialogItem, DialogItemInfo, DialogItemRight} from \"./Dialog.styled\";\r\nimport {Avatar, Col} from \"antd\";\r\nimport {CloseCircleOutlined} from \"@ant-design/icons\";\r\n\r\ntype PropsType = {\r\n    hasNewMessage: boolean\r\n    lastUserActivityDate: string\r\n    newMessagesCount: number\r\n    photo: string | null\r\n    userName: string\r\n    userId: number\r\n}\r\n\r\nconst Dialog: FC<PropsType> = ({\r\n                                   photo,\r\n                                   userName,\r\n                                   lastUserActivityDate,\r\n                                   newMessagesCount,\r\n                                   userId\r\n                               }) => {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const formattedDate = lastUserActivityDate\r\n            .substr(5, 5)\r\n            .split('-').join('.') + ' в '\r\n        + lastUserActivityDate.substr(11, 5);\r\n\r\n    const handleSelect = () => {\r\n        dispatch(getDialogMessages(userId))\r\n    }\r\n\r\n    return (\r\n        <DialogItem onClick={handleSelect}>\r\n            <Col>\r\n                <Avatar size={'large'} src={photo}/>\r\n            </Col>\r\n            <DialogItemInfo>\r\n                <span>{userName}</span>\r\n                <DialogDate>{formattedDate}</DialogDate>\r\n            </DialogItemInfo>\r\n            <DialogItemRight>\r\n                <span>{newMessagesCount} </span>\r\n                <CloseCircleOutlined/>\r\n            </DialogItemRight>\r\n        </DialogItem>\r\n    );\r\n}\r\n\r\nexport default Dialog;","import React, {FC} from \"react\";\r\nimport {DialogType} from \"../../../types/types\";\r\nimport {DialogsList, DialogsListCol} from \"./Dialogs.styled\";\r\nimport Dialog from \"../Dialog/Dialog\";\r\n\r\nconst Dialogs: FC<{ dialogs: Array<DialogType> }> = ({dialogs}) => {\r\n    return (\r\n        <DialogsListCol>\r\n            <DialogsList>\r\n                {dialogs.map(d => <Dialog\r\n                    userId={d.id}\r\n                    key={d.id}\r\n                    userName={d.userName}\r\n                    lastUserActivityDate={d.lastUserActivityDate}\r\n                    newMessagesCount={d.newMessagesCount}\r\n                    photo={d.photos.small}\r\n                    hasNewMessage={d.hasNewMessage}\r\n                />)}\r\n            </DialogsList>\r\n        </DialogsListCol>\r\n    )\r\n}\r\n\r\nexport default Dialogs;","import styled from \"styled-components\";\r\nimport {Col} from \"antd\";\r\n\r\nexport const DialogChatWindow = styled.div`\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n  border: 1px #ebedee solid;\r\n  border-radius: 2px;\r\n  background-color: #f3f3f7;\r\n`\r\n\r\nexport const DialogMessagesBlock = styled(Col)`\r\n  padding-left: 20px;\r\n  max-height: 515px;\r\n  width: 450px;\r\n`","import styled from \"styled-components\";\r\n\r\nexport const DialogMessageElement= styled.div`\r\n  border-bottom: 1px #dadcdf solid;\r\n  padding: 5px;\r\n`\r\n\r\nexport const DialogMessageText = styled.p`\r\n  padding: 0 0 0 5px;\r\n  margin: 0;\r\n  word-wrap: break-word\r\n`","import React, {FC} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {Avatar} from \"antd\";\r\nimport {selectAuthorizedUserAvatar} from \"../../../../selectors/auth-selectors\";\r\nimport { DialogMessageElement, DialogMessageText } from \"./DialogMessage.styled\";\r\nimport {selectUserName} from \"../../../../selectors/dialogs-selectors\";\r\n\r\ntype DialogMessagePropsType = {\r\n    messageText: string\r\n    senderId: number\r\n}\r\n\r\nconst DialogMessage: FC<DialogMessagePropsType> = ({messageText, senderId}) => {\r\n\r\n    const selectedUserName = useSelector(selectUserName(senderId))\r\n    const profileImage = useSelector(selectAuthorizedUserAvatar)\r\n\r\n    return (\r\n        <DialogMessageElement>\r\n            <Avatar size={'large'} src={profileImage} alt=\"Dialog message\"/>&nbsp;\r\n             <b>{selectedUserName}</b>\r\n            <DialogMessageText>{messageText}</DialogMessageText>\r\n        </DialogMessageElement>\r\n    );\r\n}\r\n\r\nexport default React.memo(DialogMessage);","import styled from \"styled-components\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\n\r\nexport const AddDialogMessageFormTextArea = styled(TextArea)`\r\n  height: 30px;\r\n  width: 450px;\r\n`","import {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectDialogUser} from \"../../../selectors/dialogs-selectors\";\r\nimport React, {useState} from \"react\";\r\nimport {sendDialogMessage} from \"../../../redux/dialogs-reducer\";\r\nimport {Row} from \"antd\";\r\nimport {AddMessageFormElement} from \"../AddMessageForm/AddMessageForm.styled\";\r\nimport {AddDialogMessageFormTextArea} from \"./AddDialogMessageForm.styled\";\r\n\r\nconst AddDialogMessageForm = () => {\r\n    const selectedUser = useSelector(selectDialogUser)\r\n\r\n    const [message, setMessage] = useState<string>('')\r\n    const dispatch = useDispatch()\r\n\r\n    const sendMessageHandler = (event: React.KeyboardEvent) => {\r\n        if (event.key === 'Enter'){\r\n            event.preventDefault();\r\n        }\r\n        if (!message) {\r\n            return;\r\n        }\r\n        dispatch(sendDialogMessage(selectedUser, message))\r\n        setMessage('')\r\n    }\r\n\r\n    return (\r\n        <form>\r\n            <Row>\r\n                <AddMessageFormElement>\r\n                    <AddDialogMessageFormTextArea\r\n                        placeholder=\"Напишите сообщение...\"\r\n                        autoSize\r\n                        onPressEnter={sendMessageHandler}\r\n                        onChange={(e) => setMessage(e.currentTarget.value)}\r\n                        value={message}>\r\n                    </AddDialogMessageFormTextArea>\r\n                </AddMessageFormElement>\r\n                {/*<AddMessageFormElement>*/}\r\n                {/*    <Button onKeyDown={sendMessageHandler}>*/}\r\n                {/*        <SendOutlined/>*/}\r\n                {/*    </Button>*/}\r\n                {/*</AddMessageFormElement>*/}\r\n            </Row>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default AddDialogMessageForm;","import {useSelector} from \"react-redux\";\r\nimport {selectDialogMessages, selectDialogUser} from \"../../../selectors/dialogs-selectors\";\r\nimport {DialogChatWindow, DialogMessagesBlock} from \"./DialogsChat.styled\";\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport DialogMessage from \"./DialogMessage/DialogMessage\";\r\nimport AddDialogMessageForm from \"../../forms/AddDialogMessageForm/AddDialogMessageForm\";\r\nimport {scrollChatHelper} from \"../../../utils/scroll-chat-helper\";\r\n\r\nconst DialogsChat = () => {\r\n    const messages = useSelector(selectDialogMessages)\r\n    const [isAutoScroll, setIsAutoScroll] = useState<boolean>(false)\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null)\r\n    const selectedUser = useSelector(selectDialogUser)\r\n\r\n    useEffect(() => {\r\n        if (isAutoScroll) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n    }, [messages])\r\n\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        scrollChatHelper(e, isAutoScroll, setIsAutoScroll)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!!selectedUser &&\r\n            <DialogMessagesBlock>\r\n                <DialogChatWindow onScroll={scrollHandler}>\r\n                    {\r\n                        messages.map(m => <DialogMessage\r\n                            key={m.id}\r\n                            messageText={m.body}\r\n                            senderId={m.senderId}\r\n                        />)\r\n                    }\r\n                    <div ref={messagesAnchorRef}>\r\n\r\n                    </div>\r\n                </DialogChatWindow>\r\n\r\n                <AddDialogMessageForm/>\r\n\r\n            </DialogMessagesBlock>\r\n            }\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default DialogsChat;","import {Row} from \"antd\"\r\nimport React, {FC, useEffect} from \"react\"\r\nimport {MessageOutlined} from \"@ant-design/icons\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectDialogs} from \"../../selectors/dialogs-selectors\";\r\nimport {getDialogs} from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"../../components/Dialogs/Dialogs/Dialogs\";\r\nimport DialogsChat from \"../../components/Dialogs/DialogsChat/DialogsChat\";\r\nimport Preloader from \"../../components/common/Preloader/Preloader\";\r\n\r\nconst DialogsPage: FC = () => {\r\n    const dialogs = useSelector(selectDialogs);\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(getDialogs())\r\n    }, [dispatch]);\r\n\r\n    if (!dialogs) {\r\n        return <Preloader/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2><MessageOutlined/> Мессенджер</h2>\r\n            <Row>\r\n                <Dialogs dialogs={dialogs}/>\r\n                <DialogsChat/>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withAuthRedirect(DialogsPage);","import styled from \"styled-components\";\r\nimport {Row} from \"antd\";\r\n\r\nexport const LoginFormWrapper = styled(Row)`\r\n  width: 200px;\r\n`\r\n\r\nexport const LoginFormField = styled(Row)`\r\n  padding-bottom: 15px;\r\n`","import {InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport style from \"../FormsControls/FormsControls.module.css\";\r\nimport {createField, GetStringKeys, InputField} from \"../FormsControls/FormsControls\";\r\nimport {required} from \"../../../utils/validators\";\r\nimport React, {FC} from \"react\";\r\nimport {LoginFormOwnProps, LoginFormValuesType} from \"../../../pages/LoginPage/LoginPage\";\r\nimport {Button} from \"antd\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {LoginFormField, LoginFormWrapper } from \"./LoginForm.styled\";\r\n\r\ntype LoginFormValuesTypeKeys = GetStringKeys<LoginFormValuesType>;\r\n\r\nexport const LoginForm: FC<InjectedFormProps<LoginFormValuesType & LoginFormOwnProps> & LoginFormOwnProps> =\r\n    ({handleSubmit, error}) => {\r\n        return (\r\n            <form onSubmit={handleSubmit}>\r\n                <LoginFormWrapper>\r\n                    <LoginFormField>\r\n                        {createField<LoginFormValuesTypeKeys>(\r\n                            \"Email\",\r\n                            \"email\",\r\n                            [required], InputField)\r\n                        }\r\n                    </LoginFormField>\r\n                    <LoginFormField>\r\n                        {createField<LoginFormValuesTypeKeys>(\r\n                            \"Пароль\",\r\n                            \"password\",\r\n                            [required],\r\n                            InputField,\r\n                            {type: \"password\"})}\r\n                    </LoginFormField>\r\n                    Запомнить меня &nbsp;\r\n                    <LoginFormField>\r\n                            {createField<LoginFormValuesTypeKeys>(\r\n                                undefined,\r\n                                \"rememberMe\",\r\n                                [],\r\n                                InputField,\r\n                                {type: \"checkbox\"},\r\n                                \"\")}\r\n                    </LoginFormField>\r\n                </LoginFormWrapper>\r\n\r\n                {error &&\r\n                <div className={style.formSummeryError}>\r\n                    {error}\r\n                </div>\r\n                }\r\n\r\n                <div>\r\n                    <Button htmlType=\"submit\">Войти</Button>\r\n                    <NavLink to={'/signup'}><Button type=\"link\">Создать аккаунт</Button></NavLink>\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n\r\nexport default reduxForm<LoginFormValuesType, LoginFormOwnProps>({form: 'login'})(LoginForm);","import {instance, APIResponseType} from \"./api\";\r\n\r\ntype MeResponseDataType = {\r\n    id: number\r\n    email: string,\r\n    login: string\r\n}\r\ntype LoginResponseDataType = {\r\n    userId: number\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get<APIResponseType<MeResponseDataType>>(`auth/me`).then(res => res.data);\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: null | string = null) {\r\n        return instance.post<APIResponseType<LoginResponseDataType>>(`auth/login`, {email, password, rememberMe, captcha})\r\n            .then(res => res.data);\r\n    },\r\n    logout() {\r\n        return instance.delete(`auth/login`).then(res => res.data);\r\n    },\r\n};","import {ResultCodesEnum} from \"../api/api\";\r\nimport {FormAction} from \"redux-form\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./store/redux-store\";\r\nimport {authAPI} from \"../api/auth-api\";\r\nimport {profileAPI} from \"../api/profile-api\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nlet initialState = {\r\n    userId: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false as boolean,\r\n    avatar: null as string | null\r\n};\r\n\r\nconst authReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/AUTH/SET_USER_DATA':\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const actions = {\r\n    setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean, avatar: string | null) => ({\r\n        type: 'SN/AUTH/SET_USER_DATA', payload:\r\n            {userId, email, login, isAuth, avatar}\r\n    } as const),\r\n}\r\n\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n    let meData = await authAPI.me();\r\n    if (meData.resultCode === ResultCodesEnum.Success) {\r\n        let myAvatar = await profileAPI.getProfile(meData.data.id);\r\n        const avatar = myAvatar.photos.small;\r\n        let {id, login, email} = meData.data;\r\n        dispatch(actions.setAuthUserData(id, email, login, true, avatar));\r\n    }\r\n}\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.login(email, password, rememberMe);\r\n\r\n    if (data.resultCode === ResultCodesEnum.Success) {\r\n        await dispatch(getAuthUserData());\r\n    } else {\r\n        toast.info(data.messages.length > 0 ? data.messages[0] : \"Some error\")\r\n    }\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.logout();\r\n    if (data.resultCode === 0) {\r\n        dispatch(actions.setAuthUserData(null, null, null, false, null));\r\n    }\r\n}\r\n\r\nexport default authReducer;\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>","import React, {FC} from \"react\";\r\nimport LoginForm from \"../../components/forms/LoginForm/LoginForm\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {LoginOutlined} from \"@ant-design/icons\";\r\nimport {selectIsAuth} from \"../../selectors/auth-selectors\";\r\nimport styled from \"styled-components\";\r\n\r\nconst LoginFormHeader = styled.h1`\r\n  padding-bottom: 8px;\r\n`\r\nexport type LoginFormOwnProps = {}\r\nexport type LoginFormValuesType = {\r\n    rememberMe: boolean\r\n    password: string\r\n    email: string\r\n}\r\n\r\nconst LoginPage: FC = () => {\r\n\r\n    const isAuth = useSelector(selectIsAuth)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const onSubmit = (formData: LoginFormValuesType) => {\r\n        dispatch(login(formData.email, formData.password, formData.rememberMe))\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={\"profile\"}/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <LoginFormHeader>Войти в аккаунт &nbsp; &nbsp;<LoginOutlined /></LoginFormHeader>\r\n            <LoginForm onSubmit={onSubmit}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(LoginPage);","import React, {FC} from 'react';\r\nimport {Redirect, Route, RouteComponentProps, Switch, withRouter} from \"react-router-dom\";\r\nimport {SignUpPage} from \"../../pages/SignUpPage/SignUpPage\";\r\nimport {BackTop} from \"antd\";\r\nimport withSuspense from \"../../hoc/withSuspense\";\r\nimport {UpOutlined} from \"@ant-design/icons\";\r\nimport ErrorPage from \"../../pages/ErrorPage/ErrorPage\";\r\nimport UsersPage from '../../pages/UsersPage/UsersPage';\r\nimport { AppContentWrapper, BackTopStyled } from './AppContent.styled';\r\nimport DialogsPage from \"../../pages/DialogsPage/DialogsPage\";\r\nimport LoginPage from \"../../pages/LoginPage/LoginPage\";\r\n\r\nconst ProfilePage = React.lazy(() => import('../../pages/ProfilePage/ProfilePage'))\r\nconst NewsPage = React.lazy(() => import('../../pages/NewsPage/NewsPage'))\r\nconst FriendsPage = React.lazy(() => import('../../pages/FriendsPage/FriendsPage'))\r\nconst InfoPage = React.lazy(() => import('../../pages/InfoPage/InfoPage'))\r\nconst CommonChatPage = React.lazy(() => import('../../pages/CommonChatPage/CommonChatPage'))\r\n\r\nconst SuspendedProfilePage = withSuspense(ProfilePage)\r\nconst SuspendedNewsPage = withSuspense(NewsPage)\r\nconst SuspendedFriendsPage = withSuspense(FriendsPage)\r\nconst SuspendedInfoPage = withSuspense(InfoPage)\r\nconst SuspendedCommonChatPage = withSuspense(CommonChatPage)\r\n\r\nconst AppContent: FC<PropsType> = () => {\r\n    return (\r\n        <AppContentWrapper>\r\n            <Switch>\r\n                <Route exact path='/' render={() => <Redirect to={'/profile'}/>}/>\r\n                <Route path='/profile/:userId?' render={() => <SuspendedProfilePage/>}/>\r\n                <Route path='/news' render={() => <SuspendedNewsPage/>}/>\r\n                <Route path='/users' render={() => <UsersPage/>}/>\r\n                <Route path='/friends' render={() => <SuspendedFriendsPage/>}/>\r\n                <Route path='/login' render={() => <LoginPage/>}/>\r\n                <Route path='/signup' render={() => <SignUpPage/>}/>\r\n                <Route path='/dialogs' render={() => <DialogsPage/>}/>\r\n                <Route path='/commonChat' render={() => <SuspendedCommonChatPage/>}/>\r\n                <Route path='/info' render={() => <SuspendedInfoPage/>}/>\r\n                <Route path='*' render={() => <ErrorPage/>}/>\r\n            </Switch>\r\n            <BackTop>\r\n                <BackTopStyled>\r\n                    <UpOutlined/>\r\n                </BackTopStyled>\r\n            </BackTop>\r\n        </AppContentWrapper>\r\n    );\r\n}\r\n\r\ntype PropsType = RouteComponentProps & {}\r\n\r\nexport default React.memo(withRouter(AppContent));","import styled from \"styled-components\";\r\nimport {Header} from \"antd/es/layout/layout\";\r\nimport {Col} from \"antd\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport const HeaderWrapper = styled(Header)`\r\n  background-color: #979ea9;\r\n  border-bottom: #bac2ce;\r\n`\r\nexport const HeaderLogo = styled.img`\r\n  width: 40px;\r\n`\r\n\r\nexport const HeaderLogoWrapper = styled(Col)`\r\n  padding-left: 120px;\r\n`\r\n\r\nexport const HeaderUserAvatarLink = styled(Link)`\r\n  padding-right: 30px;\r\n`\r\n\r\nexport const HeaderUserEmail = styled.span`\r\n  padding-left: 63px;\r\n`\r\n\r\nexport const HeaderLogoLink = styled(Link)`\r\n  color: black;\r\n\r\n  &:hover {\r\n    color: #414141;\r\n    text-decoration: underline;\r\n  }\r\n`\r\n","import React from 'react';\r\nimport {Avatar, Button, Col, Row} from \"antd\";\r\nimport Logo from \"../../assets/images/logo.svg\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {selectAuthorizedUserAvatar, selectAuthorizedUserEmail, selectIsAuth} from \"../../selectors/auth-selectors\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\nimport {\r\n    HeaderLogo,\r\n    HeaderLogoLink,\r\n    HeaderLogoWrapper,\r\n    HeaderUserAvatarLink,\r\n    HeaderUserEmail,\r\n    HeaderWrapper} from './AppHeader.styled';\r\n\r\nconst AppHeader = () => {\r\n    const isAuth = useSelector(selectIsAuth)\r\n    const authorizedUserEmail = useSelector(selectAuthorizedUserEmail)\r\n    const authorizedUserAvatar = useSelector(selectAuthorizedUserAvatar)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const logoutCallback = () => {\r\n        dispatch(logout())\r\n    }\r\n\r\n    return (\r\n        <HeaderWrapper>\r\n            <Row>\r\n                <HeaderLogoWrapper flex=\"1 1 50px\">\r\n                    <HeaderLogo src={Logo} alt='App logo'/>\r\n                    <HeaderLogoLink to='/profile'>\r\n                        <HeaderUserEmail>{authorizedUserEmail} </HeaderUserEmail>\r\n                    </HeaderLogoLink>\r\n                </HeaderLogoWrapper>\r\n                {isAuth\r\n                    ? <>\r\n                        <Col flex=\"0 1 190px\">\r\n                            <HeaderUserAvatarLink to=\"/profile\">\r\n                                <Avatar src={authorizedUserAvatar} size={\"large\"}/>\r\n                            </HeaderUserAvatarLink>\r\n                            <Button onClick={logoutCallback}>\r\n                                Выйти\r\n                            </Button>\r\n                        </Col>\r\n                    </>\r\n                    : <Col flex=\"0 1 120px\">\r\n                        <Button>\r\n                            <Link to={'/login'}>\r\n                                Войти\r\n                            </Link>\r\n                        </Button>\r\n                    </Col>\r\n                }\r\n            </Row>\r\n        </HeaderWrapper>\r\n    );\r\n}\r\n\r\nexport default AppHeader;","import styled from \"styled-components\";\r\nimport {Layout} from \"antd\";\r\n\r\nexport const MainFrameWrapper = styled(Layout)`\r\n  margin: 0 auto;\r\n  min-width: 1100px;\r\n  padding: 30px 0 0 0;\r\n`\r\n\r\nexport const GlobalPreloader = styled.div`\r\n  padding-left: 45%;\r\n  padding-top: 300px;\r\n`","import {getAuthUserData} from \"./auth-reducer\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppStateType, InferActionsTypes} from \"./store/redux-store\";\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst appReducer = (state=  initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SN/APP/INITIALIZED_SUCCESS':\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const actions = {\r\n    initializedSuccess: () => ({type: 'SN/APP/INITIALIZED_SUCCESS'} as const)\r\n}\r\n\r\ntype ThunkType = ThunkAction<any, AppStateType, unknown, ActionsType>\r\n\r\nexport const initializeApp = (): ThunkType => (dispatch) => {\r\n    let getAuthUserDataPromise = dispatch(getAuthUserData());\r\n\r\n    Promise.all([getAuthUserDataPromise])\r\n        .then(() => {\r\n        dispatch(actions.initializedSuccess());\r\n    });\r\n};\r\n\r\nexport default appReducer;\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>","import React, {FC, useEffect} from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport {Layout} from 'antd';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport AppFooter from \"../AppFooter/AppFooter\";\r\nimport {selectInitialized} from \"../../selectors/app-selectors\";\r\nimport AppSidebar from \"../AppSidebar/AppSidebar\";\r\nimport AppContent from \"../AppContent/AppContent\";\r\nimport AppHeader from \"../AppHeader/AppHeader\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {GlobalPreloader, MainFrameWrapper} from './App.styled';\r\nimport {initializeApp} from \"../../redux/app-reducer\";\r\nimport {ToastContainer} from 'react-toastify';\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport const App: FC = () => {\r\n    const initialized = useSelector(selectInitialized)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(initializeApp())\r\n    }, [dispatch])\r\n\r\n    if (!initialized) {\r\n        return <GlobalPreloader><Preloader/></GlobalPreloader>\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <AppHeader/>\r\n            <MainFrameWrapper>\r\n                <AppSidebar/>\r\n                <AppContent/>\r\n            </MainFrameWrapper>\r\n            <AppFooter/>\r\n            <ToastContainer\r\n                position=\"top-center\"\r\n                autoClose={5000}\r\n                hideProgressBar={false}\r\n                newestOnTop={false}\r\n                closeOnClick\r\n                rtl={false}\r\n                pauseOnFocusLoss\r\n                draggable\r\n                pauseOnHover\r\n            />\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default React.memo(App);","import {NewsElementType} from \"../types/types\";\r\nimport {InferActionsTypes} from \"./store/redux-store\";\r\n\r\nlet initialState = {\r\n    news: [\r\n        {\r\n            title: 'Обновлен дизайн приложения',\r\n            imageUrl: 'https://sun9-69.userapi.com/impg/AxxeCAiyethb_wtRT_Mb5kKtcZzP03r3M4zGuA/7RUUWX60C9k.jpg?size=1654x920&quality=96&sign=63d3c45b9b712da473f1163dc399557a&type=album',\r\n            summary: 'Была обнвлена страница профиля пользователя приложения, список пользователей, список друзей. Также ' +\r\n                'убраны баги связанные с профилем пользователя и списком друзей. На страницу профиля добавлено поле количества друзей ' +\r\n                'пользователя, исправлена работа лайков постов пользователя.',\r\n            publishedAt: '04-06-2021'\r\n        },\r\n        {\r\n            title: 'Добавлен поиск пользователей и пагинация',\r\n            imageUrl: 'https://sun9-36.userapi.com/impg/2vy2rXeYUR5uk6OsDvQNmSTknBXX0wKANjXVFA/wnNNnA_QZus.jpg?size=625x603&quality=96&sign=fa931ca45802a1ac04b2c0771bb6b496&type=album',\r\n            summary: 'В раздел \"Пользователи\" было добавлено текстовое поле для поиска пользователей по имени и/или фамилии. ' +\r\n                'Помимо текстового поля был добавлен раскрывающийся список с фильтрами поиска, такими как: поиск по друзьям, поиск всех пользователей' +\r\n                ', а также поиск пользователей, которых нет у вас в друзьях.',\r\n            publishedAt: '21-03-2021'\r\n        },\r\n        {\r\n            title: 'Добавлен раздел \"Мои друзья\"',\r\n            imageUrl: 'https://sun9-34.userapi.com/impg/AND3E6RAo3VSnpSB6H1bItI0rQyaDpFUDPdqqA/kvs3rbDenZk.jpg?size=1093x786&quality=96&sign=269ee2ce00b189f82f74706be94f6d14&type=album',\r\n            summary: 'Создан раздел \"Мои друзья\" со списком добавленных пользователем друзей. Также разработана строка для поиска ' +\r\n                'друзей по имени и/или фамилии.',\r\n            publishedAt: '04-04-2021'\r\n        },\r\n        {\r\n            title: 'Добавлена возможность создавать посты',\r\n            imageUrl: 'https://sun9-73.userapi.com/impg/xc9OitnHM3R2DYw6iqABWnjR3wDxv64bpkKaRA/bjunwNdyJC0.jpg?size=932x594&quality=96&sign=83d78f786cf9387b809f1c2bc8ef2545&type=album',\r\n            summary: 'Добавлена возможность создавать посты на собственных страницах профиля. Также имеется возможность ' +\r\n                '\"лайкать\" созданные посты.',\r\n            publishedAt: '25-02-2021'\r\n        }\r\n    ] as Array<NewsElementType>\r\n}\r\n\r\nconst newsReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setNews: (data: Array<any>) => ({type: 'SN/NEWS/FIND_CITY', data} as const),\r\n}\r\n\r\nexport default newsReducer;\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>","import {Action, applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"../profile-reducer\";\r\nimport dialogsReducer from \"../dialogs-reducer\";\r\nimport usersReducer from \"../users-reducer\";\r\nimport authReducer from \"../auth-reducer\";\r\nimport appReducer from \"../app-reducer\";\r\nimport chatReducer from \"../chat-reducer\";\r\nimport newsReducer from \"../news-reducer\";\r\nimport friendsReducer from \"../friends-reducer\";\r\nimport thunkMiddleware, {ThunkAction} from \"redux-thunk\";\r\nimport {reducer as formReducer} from 'redux-form';\r\n\r\nlet rootReducer = combineReducers({\r\n    app: appReducer,\r\n    auth: authReducer,\r\n    profilePage: profileReducer,\r\n    friendsPage: friendsReducer,\r\n    newsPage: newsReducer,\r\n    usersPage: usersReducer,\r\n    dialogsPage: dialogsReducer,\r\n    chat: chatReducer,\r\n    form: formReducer\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer;  // (globalState: GLOBALSTATE) => GLOBALSTATE\r\nexport type AppStateType = ReturnType<RootReducerType> // Type that return RootReducerType\r\n\r\nexport type InferActionsTypes<T> = T extends {[keys: string]: (...args: any[]) => infer U} ? U : never\r\n\r\nexport type BaseThunkType<A extends Action = Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\nconst composeEnhancers = (window && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\nexport default store","import {createGlobalStyle} from \"styled-components\";\r\n\r\nexport const Global = createGlobalStyle`\r\n  * {\r\n    box-sizing: content-box;\r\n  }\r\n\r\n  body {\r\n    margin: 0;\r\n    padding: 0;\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\r\n    sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    scrollbar-width: thin;       \r\n    scrollbar-color: #a3cfff #dadcdf;\r\n  }\r\n`","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from \"./components/App/App\";\nimport {Provider} from \"react-redux\";\nimport store from \"./redux/store/redux-store\";\nimport {BrowserRouter} from \"react-router-dom\";\nimport {Global} from \"./Global.styled\";\n\nReactDOM.render(\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <Provider store={store}>\n            <Global/>\n            <App/>\n        </Provider>\n    </BrowserRouter>\n    , document.getElementById('root'));","import {AppStateType} from \"../redux/store/redux-store\";\r\nimport { createSelector } from 'reselect'\r\n\r\nconst auth = (state: AppStateType) => state.auth\r\n\r\nexport const selectIsAuth = createSelector(\r\n    [auth],\r\n    auth => auth.isAuth\r\n)\r\n\r\nexport const selectCurrentUserLogin = createSelector(\r\n    [auth],\r\n    auth => auth.login\r\n)\r\n\r\nexport const selectAuthorizedUserId = createSelector(\r\n    [auth],\r\n    auth => auth.userId\r\n)\r\n\r\nexport const selectAuthorizedUserAvatar = createSelector(\r\n    [auth],\r\n    auth => auth.avatar\r\n)\r\n\r\nexport const selectAuthorizedUserEmail = createSelector(\r\n    [auth],\r\n    auth => auth.email\r\n)","import React from \"react\";\r\nimport preloader from \"../../../assets/images/preloader.svg\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const PreloaderWrapper = styled.div`\r\n  position: absolute;\r\n  margin: 0 auto;\r\n`\r\n\r\nconst Preloader  = () => {\r\n    return <PreloaderWrapper>\r\n        <img src={preloader} alt=\"Preloader\"/>\r\n    </PreloaderWrapper>\r\n}\r\n\r\nexport default Preloader;","import {instance, APIResponseType, GetItemsType} from \"./api\";\r\nimport {DialogMessageType} from \"../types/types\";\r\n\r\nexport const dialogsAPI = {\r\n    startDialog(userId: number) {\r\n        return instance.put<APIResponseType>(`dialogs/${userId}`).then(res => res.data);\r\n    },\r\n\r\n    getDialogs() {\r\n        return instance.get('dialogs').then(res => res.data);\r\n    },\r\n\r\n    getDialogMessages(userId: number) {\r\n        return instance.get<GetItemsType<DialogMessageType>>(`dialogs/${userId}/messages`).then(res => res.data);\r\n    },\r\n\r\n    sendDialogMessage(userId: number, body: string) {\r\n        return instance.post(`dialogs/${userId}/messages`, {body}).then(res => res.data);\r\n    },\r\n\r\n};\r\n","import {DialogMessageType, DialogType} from \"../types/types\";\r\nimport {BaseThunkType, InferActionsTypes} from \"./store/redux-store\";\r\nimport {FormAction} from \"redux-form\";\r\nimport {dialogsAPI} from \"../api/dialogs-api\";\r\n\r\nlet initialState = {\r\n    messages: [] as Array<DialogMessageType>,\r\n    dialogs: [] as Array<DialogType>,\r\n    selectedUser: 0 as number\r\n};\r\n\r\nconst dialogsReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"SN/DIALOGS/SET_DIALOGS\":\r\n            return {...state, dialogs: action.dialogs}\r\n        case \"SN/DIALOGS/SET_DIALOG_MESSAGES\":\r\n            return {...state, messages: action.messages}\r\n        case \"SN/DIALOGS/SET_SELECTED_USER\":\r\n            return {...state, selectedUser: action.userId}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setDialogs: (dialogs: Array<DialogType>) => ({type: 'SN/DIALOGS/SET_DIALOGS', dialogs} as const),\r\n    setDialogMessages: (messages: Array<DialogMessageType>) => ({type: 'SN/DIALOGS/SET_DIALOG_MESSAGES', messages} as const),\r\n    setSelectedUser: (userId: number) => ({type: 'SN/DIALOGS/SET_SELECTED_USER', userId} as const)\r\n}\r\n\r\nexport const startDialog = (userId: number): ThunkType => async () => {\r\n    await dialogsAPI.startDialog(userId);\r\n}\r\n\r\nexport const getDialogs = (): ThunkType => async (dispatch) => {\r\n    let data = await dialogsAPI.getDialogs();\r\n    dispatch(actions.setDialogs(data));\r\n}\r\n\r\nexport const getDialogMessages = (userId: number): ThunkType => async (dispatch) => {\r\n    let data = await dialogsAPI.getDialogMessages(userId);\r\n    dispatch(actions.setDialogMessages(data.items));\r\n    dispatch(actions.setSelectedUser(userId))\r\n}\r\n\r\nexport const sendDialogMessage = (userId: number, body: string): ThunkType => async (dispatch) => {\r\n    await dialogsAPI.sendDialogMessage(userId, body);\r\n    await dispatch(getDialogMessages(userId));\r\n}\r\n\r\nexport default dialogsReducer;\r\n\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>","import {GetItemsType, instance, APIResponseType} from \"./api\";\r\nimport {UserType} from \"../types/types\";\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10, term: string = '', friend: null | boolean = null) {\r\n        return instance.get<GetItemsType<UserType>>(`users?page=${currentPage}&count=${pageSize}&term=${term}` + (friend === null ? '' : `&friend=${friend}`))\r\n            .then(res => res.data)\r\n    },\r\n    userFollow(userId: number) {\r\n        return instance.post<APIResponseType>(`follow/${userId}`).then(res => res.data)\r\n    },\r\n    userUnfollow(userId: number) {\r\n        return instance.delete(`follow/${userId}`).then(res => res.data) as Promise<APIResponseType>\r\n    }\r\n};","import {PhotosType, ProfileType} from \"../types/types\";\r\nimport {instance, APIResponseType} from \"./api\";\r\n\r\ntype SavePhotoResponseDataType = {\r\n    photos: PhotosType\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number | null) {\r\n        return instance.get<ProfileType>(`profile/${userId}`).then(res => res.data)\r\n    },\r\n\r\n    getStatus(userId: number) {\r\n        return instance.get<string>(`profile/status/${userId}`).then(res => res.data)\r\n    },\r\n\r\n    updateStatus(status: string) {\r\n        return instance.put<APIResponseType>(`profile/status`, {status: status}).then(res => res.data)\r\n    },\r\n\r\n    savePhoto(photoFile: File) {\r\n        console.log(photoFile)\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photoFile);\r\n        return instance.put<APIResponseType<SavePhotoResponseDataType>>(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then(res => res.data)\r\n    },\r\n\r\n    saveProfile(profile: ProfileType) {\r\n        return instance.put<APIResponseType>(`profile`, profile).then(res => res.data)\r\n    }\r\n};"],"sourceRoot":""}